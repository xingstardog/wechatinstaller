var WeixinJSBridge=function(n){if(void 0!==n.WeixinJSBridge)return n.WeixinJSBridge;var e=n.hasOwnProperty("document"),i={},t=0,r={};e&&n.navigator.userAgent.indexOf("Android");var a=n.WeixinJSCore;delete n.WeixinJSCore;var o=function(n,e,r){var o;o="string"==typeof e?e:JSON.stringify(e||{});var c=++t;i[c]=r,function(n,e,t){var r=a.invokeHandler(n,e,t);if(void 0!==r&&"function"==typeof i[t]&&""!==r){try{r=JSON.parse(r)}catch(n){console.error("invokeHandler result parse failed "+r),r={}}i[t](r),delete i[t]}}(n,o,c)},c=function(n,e){r[n]=e},d=function(n,e){return e.unshift(n),sprintf.apply(null,e)},f={};function v(e){if(n.WeixinJSBridge.log===s){for(var i=[],t=0;t<arguments.length;t++)i.push(arguments[t]);var r,a=i.shift();try{r=d(a,i)}catch(n){r=e}o("log",{msg:r})}}var s=v;function u(e){return n.WeixinJSBridge.env!==l?"":f[e]}var l=u;return c("sys:init",function(e){if(n.WeixinJSBridge._hasInit)v("hasInit, no need to init again");else{var i;n.WeixinJSBridge._hasInit=!0;try{i=new Event("WeixinJSBridgeReady")}catch(n){(i=document.createEvent("Event")).initEvent("WeixinJSBridgeReady")}document.dispatchEvent(i)}}),{invoke:o,call:o,on:c,log:v,env:u,_hasInit:!1,subscribeHandler:function(n,e){if("string"==typeof e&&data.length>0)try{e=JSON.parse(e)}catch(n){}var i=r[n];"function"==typeof i&&i(e)},invokeCallbackHandler:function(n,e){var t=i[n];"function"==typeof t&&t(e),delete i[n]}}}(this);